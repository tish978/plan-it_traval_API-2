<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Plan Trip Results Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @keyframes glowing {
            0% {
               box-shadow: 0 0 15px rgba(128, 0, 128, 0.6);
            }
            50% {
               box-shadow: 0 0 30px rgba(128, 0, 128, 1);
            }
            100% {
               box-shadow: 0 0 15px rgba(128, 0, 128, 0.6);
            }
        }

         @keyframes lavaLamp {
            0%, 100% {
                background-position: 0 0;
            }
            50% {
                background-position: 100% 100%;
            }
        }

         body {
            margin: 0;
            font-family: Arial, sans-serif;
            color: greenyellow;
            overflow: hidden;
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(45deg, purple, deeppink, rebeccapurple, firebrick);
            background-size: 300% 300%;
            animation: lavaLamp 5s infinite;
        }

        .glow-button{
            background-color: rebeccapurple;
            color: white;
            transition: background-color 0.3s;
        }

        .glow-button:hover {
            animation: glowing 2.5s infinite;
            background-color: rebeccapurple;
        }
    </style>
</head>
<body>
<div class="container">
    <h2>Here is your report of all your recommended destinations!</h2>
    <div id="resultsContainer" class="card my-3">
        <div class="card-body">
            <table class="table table-bordered" id="destinationTable">
                <thead>
                <tr>
                    <th>
                        Location Name(s)
                        <button id="sortLocation" class="glow-button">Sort</button>
                    </th>
                    <th>
                        Country
                        <button id="sortCountry" class="glow-button">Sort</button>
                    </th>
                    <th>
                        Continent
                        <button id="sortContinent" class="glow-button">Sort</button>
                    </th>
                    <th>
                        Weather
                        <button id="sortWeather" class="glow-button">Sort</button>
                    </th>
                    <th>
                        Language
                        <button id="sortLanguage" class="glow-button">Sort</button>
                    </th>
                    <th>
                        Expensive
                        <button id="sortExpensive" class="glow-button">Sort</button>
                    </th>
                    <th>
                        Attractions
                        <button id="sortAttractions" class="glow-button">Sort</button>
                    </th>
                </tr>
                </thead>
                <tbody>
                {% for result in results %}
                <tr>
                    <td>
                        <ul>
                            {% for location in result['locations_info'] %}
                            <li> {{ location }}</li>
                            {% endfor %}
                        </ul>
                    </td>
                    <td>{{ result['timestamp'] }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>





    <div class="container">
        <h2>Here are your recommended destinations to visit!</h2>
        {% for result in results %}
        <div class="card my-3">
            <div class="card-header">
                Destination {{ loop.index }}
            </div>
            <div class="card-body">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                           <!--- <th>ID</th> -->
                            <th>Location Name</th>
                            <th>Country</th>
                            <th>Continent</th>
                            <th>Weather</th>
                            <th>Language</th>
                            <th>Expensive</th>
                            <th>Attractions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>{{ result['location_name'] }}</td>
                            <td>{{ result['country'] }}</td>
                            <td>{{ result['continent'] }}</td>
                            <td>{{ result['weather'] }}</td>
                            <td>{{ result['language'] }}</td>
                            <td>{{ result['isExpensive'] }}</td>
                            <td>
                                <ul>
                                    {% for attraction in result['attractions'] %}
                                    <li>{{ attraction }}</li>
                                    {% endfor %}
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        {% endfor %}
    </div>
    <!-- Add Bootstrap JS and jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        const submitButton = document.getElementById('submitButton');

        // Function to sort the data by location (alphabetically)
        const sortLocation = () => {
            const table = document.getElementById('destinationTable');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));

            rows.sort((a, b) => {
                const locationNameA = a.cells[0].textContent;
                const locationNameB = b.cells[0].textContent;

                if (ascendingOrder){
                    return locationNameA.localeCompare(locationNameB);
                } else {
                    return locationNameB.localeCompare(locationNameA);
                }
            });

            // Clear the table body
            tbody.innerHTML = '';

            // Append the sorted rows back to the table
            rows.forEach(row => {
                tbody.appendChild(row);
            })

            ascendingOrder = !ascendingOrder;   // toggle the sort order
        };

        const sortCountry = () => {
            const table = document.getElementById('destinationTable');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));

            rows.sort((a, b) => {
                const locationNameA = a.cells[1].textContent;
                const locationNameB = b.cells[1].textContent;

                if (ascendingOrder){
                    return locationNameA.localeCompare(locationNameB);
                } else {
                    return locationNameB.localeCompare(locationNameA);
                }
            });

            // Clear the table body
            tbody.innerHTML = '';

            // Append the sorted rows back to the table
            rows.forEach(row => {
                tbody.appendChild(row);
            })

            ascendingOrder = !ascendingOrder;   // toggle the sort order
        };

        const sortLocationButton = document.getElementById('sortLocation');
        sortLocationButton.addEventListener('click', sortLocation);

        const sortCountryButton = document.getElementById('sortCountry');
        sortCountryButton.addEventListener('click', sortCountry);

        const sortContinentButton = document.getElementById('sortContinent');
        sortContinentButton.addEventListener('click', sortContinent);

        const sortWeatherButton = document.getElementById('sortWeather');
        sortWeatherButton.addEventListener('click', sortWeather);

        const sortLanguageButton = document.getElementById('sortLanguage');
        sortLanguageButton.addEventListener('click', sortLanguage);

        const sortExpensiveButton = document.getElementById('sortExpensive');
        sortExpensiveButton.addEventListener('click', sortExpensive);

        const sortAttractionsButton = document.getElementById('sortAttractions');
        sortAttractionsButton.addEventListener('click', sortAttractions);



        if (submitButton) {
            submitButton.addEventListener('mouseover', () => {
                // Add the glow-button class when the button is being hovered over
                submitButton.classList.add('glow-button');
            });

            submitButton.addEventListener('mouseout', () => {
                // Remove the glow-button class when the mouse moves out of the way of the button
                submitButton.classList.remove('glow-button');
            });
        }

        const body = document.body;

        // Update background colors based on mouse position
        document.addEventListener('mousemove', (event) => {
            const mouseX = event.clientX / window.innerWidth * 50; // Normalize mouse position
            const mouseY = event.clientY / window.innerHeight * 50;

            body.style.backgroundImage = `radial-gradient(at ${mouseX}% ${mouseY}%, purple, deeppink, rebeccapurple, firebrick)`;
        });
    </script>
</body>
</html>
